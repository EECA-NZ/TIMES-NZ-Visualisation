# TIMES-NZ 2.0 Data Visualization App
This repository contains README, the source code and data behind TIMES-NZ shiny Data Visualization App. The App is located [here](https://times-nz-model-eeca.shinyapps.io/TIMES_V2/) and it can be viewed through [EECA's website](http://www.eeca.govt.nz/TIMES-NZ). 

## Background
The New Zealand Energy Scenarios Times-NZ 2.0 website presents model insights for the latest TIMES-NZ scenarios to contribute to decision making in businesses and Government. This New Zealand Energy Scenarios TIMES-NZ 2.0 visualization tool will allow you to explore how New Zealand energy futures may look like based on outputs from the New Zealand Energy Scenarios TIMES-NZ 2.0 model. A detailed description of the  model and the App is found [here](https://www.eeca.govt.nz/New-Zealand-Energy-Scenarios-TIMES-NZ-2.pdf).
 
## To run app
There are two main R project associated with this App. 
1. The data processing project (TIMES_shiny_data_cleaning.Rproj) which is in the data_cleaning folder. 
	- To Run:
		- Open `TIMES_shiny_data_cleaning.Rproj` project file in the data_cleaning folder.
		- Run `renv::restore()` in the Console to install all needed environment and packages.
		- Run `source('New_Data_Processing.R', echo=TRUE)` in the Console to generate the needed data.
2. The Shiny App project (TIMES_shiny_app.Rproj) which is in the the app folder.
	- To Run:
		- Open `TIMES_shiny_app.Rproj` project file in the app folder. 
		- Run `renv::restore()` to install all needed environment and packages for the app. 
		- Run `shiny::runApp()` in the Console to run the App.

## Deploy App
To deploy the app run `source('Deploy_App.R', echo=TRUE)` in the Console. One needs to configure the rsconnect package to use EECA's shinyapps.io account. A detailed description to configure the rsconnect is located [here](https://shiny.rstudio.com/articles/shinyapps.html). Before running the `'Deploy_App.R'` script, one need to set up EECA's shinyapps.io account  using the `rsconnect` package. Shinyapps.io automatically generates a secret token, which the `rsconnect` package can use to reach the shinyapps.io account. A step by step instruction on the RStudio to the shenyapp.io is found [here](https://shiny.rstudio.com/articles/shinyapps.html) under the Configure rsconnect section. 
		

## Graphs

The graphs are interactive and shows more information when one mouse-hover over the elements of the graph. The graphs have interactive legends and by clicking on the names on the legend turns them on and off.



## App folder

    ├── APP                    	     	# Application files (Files needed for App to run)
    │   ├── TIMES_shiny_app.Rproj 	# The R project file for the App
    │   ├── server.R		# server.R defines the responses to the user inputs, the logic and data filtering
    │   ├── ui.R 			# ui.R defines the UI component of the Shiny app, such as the buttons, pickers, menus
    │   ├── Deploy_App.R        	# This script is used to deploy the App
    │   ├── functions.R		# The plotting function and helper functions are located here
    │   ├── intro_text.html		# This holds the text for introduction to tour
    │   ├── renv.lock   		# It used by renv::restore() to install all needed environment and packages
    │   ├── data
    │	     ├── data_for_shiny.rda  	# The contains the data objects generated by the data processing scripts
    │	     ├── load_data.R		# Loads the data objects from rda file and generate the hierarchy data object 
    │   ├── rsconnect
    │		├── shinyapps.io
    │			├── ... 	# Contains the credentials for shinyapps.io 
    │   ├──  renv
    │		├── library
    │		     ├── ...		# Contains the needed files fof the environment needed for the App 
    │		├── activate		# Script to install the needed environments 
    │   ├── www                
    │		├── css			# Conatins the styling files
    │		├── font-awesome-5.3.1  # Contains all the awesome fonts  
    │		├── img			# Contains the EECA and BEC logo
    

## Data cleaning folder
    ├── data_cleaning			    	# Application files (Files needed for App to run)
    │   ├── TIMES_shiny_data_cleaning.Rproj 	# The R project file for the App
    │   ├── Assumptions.xlsx 			# The assumption data
    │   ├── Assumptions_Insight_comments.xlsx	# Assumption and insight Plot commentary
    │   ├── Caption_Table.xlsx			# Pup-up caption
    │   ├── intro.csv				# This holds the introduction to tour
    │   ├── Kea-v79.VD				# Kea model output
    │   ├── Tui-v79.VD				# Tui model output
    │   ├── Key-Insight.xlsx			# The Key-Insight data
    │   ├── New_Data_Processing.R		# Script that performs the data cleaning and calculations needed for the App
    │   ├── renv
    │		├── library
    │		     ├── ...		# Contains the needed files fof the environment needed for the App 
    │		├── activate		# Script to install the needed environments 
    │   ├── renv.lock			# It used by renv::restore() to install all needed environment and packages
    │   ├── Schema.xlsx			# For restricting TIMES model and 'natural language' translations from TIMES codes
    │   ├── Schema_colors.xlsx		# To specify the color and shape for each Fuel and Technology 
    │   ├── Schema_Technology.xlsx 		# For defining the Technology groups 
    │   ├── renv.lock   			# It used by renv::restore() to install all needed environment and packages
